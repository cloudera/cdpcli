swagger: '2.0'
x-endpoint-name: datacatalog
x-products: CDP
x-form-factors: public
x-cdp-releases: PUBLIC
x-audit: true
info:
  version: 0.9.153
  title: Cloudera DataCatalog Service
  license:
    name: Apache 2.0
  description: Cloudera DataCatalog Service is a web service, using this service a user can execute operations like launching profilers in DataCatalog.
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /api/v1/datacatalog/launchProfilers:
    post:
      summary: Launches DataCatalog profilers in a given datalake.
      description: Launches DataCatalog profilers in a given datalake.
      operationId: launchProfilers
      x-entitlement: DATA_CATALOG_ENABLE_API_SERVICE
      x-mutating: true
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/LaunchProfilersRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/LaunchProfilersResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/datacatalog/getSuggestedTags:
    post:
      summary: Get Suggested tags by the Data Compliance profiler.
      description: Get the tags suggested by the Data Compliance profiler.
      operationId: getSuggestedTags
      x-entitlement: DATA_CATALOG_ENABLE_API_SERVICE
      x-mutating: false
      parameters:
        - in: body
          name: input
          required: true
          schema:
            $ref: '#/definitions/GetSuggestedTagsRequest'
      responses:
        200:
          description: List of suggested tags.
          schema:
            $ref: '#/definitions/GetSuggestedTagsResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
  /api/v1/datacatalog/reviewSuggestedTags:
    post:
      summary: Review tags suggested by Data Compliance Profiler
      description: Review the tags suggested by the Data Compliance profiler.
      operationId: reviewSuggestedTags
      x-entitlement: DATA_CATALOG_ENABLE_API_SERVICE
      x-mutating: true
      parameters:
        - in: body
          name: input
          required: true
          schema:
            $ref: '#/definitions/ReviewSuggestedTagsRequest'
      responses:
        200:
          description: Accept or Reject tags suggested by Data Compliance Profiler.
          schema:
            $ref: '#/definitions/ReviewSuggestedTagsResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
definitions:
  Error:
    type: object
    description: An object returned on an error.
    properties:
      code:
        type: string
        description: The error code.
      message:
        type: string
        description: The error message.
  LaunchProfilersRequest:
    type: object
    description: Launch Profilers request.
    required:
      - datalake
    properties:
      datalake:
        type: string
        description: The CRN of the Datalake.
      enableHA:
        type: boolean
        description: Enables High Availability (HA) for datacatalog profilers (default value is false). The High Availability (HA) Profiler cluster provides failure resilience and scalability but incurs additional cost.
      profilers:
        description: List of profiler names that need to be launched. (Applicable only for compute cluster enabled environments).
        type: array
        items:
          type: string
      instanceTypes:
        description: List of instance types to be used for the auto-scaling node group setup (Applicable only for compute cluster enabled environments).
        type: array
        items:
          type: string
      maxNodes:
        description: Maximum number of nodes that can be spawned inside the auto-scaling node group, in the range of 30 to 100 (both inclusive). (Applicable only for compute cluster enabled environments).
        type: integer
        format: int64
  LaunchProfilersResponse:
    type: object
    description: Profiler launch operation response.
    properties:
      datahubCluster:
        $ref: '#/definitions/Cluster'
        description: Datahub cluster details.
  Cluster:
    type: object
    description: Information about a cluster.
    properties:
      clusterName:
        type: string
        description: The name of the cluster.
      crn:
        type: string
        description: The CRN of the cluster.
      creationDate:
        type: string
        format: date-time
        description: The date when the cluster was created.
      clusterStatus:
        type: string
        description: The status of the cluster.
      nodeCount:
        type: integer
        format: int32
        description: The cluster node count.
      workloadType:
        type: string
        description: The workload type for the cluster.
      cloudPlatform:
        type: string
        description: The cloud platform.
      imageDetails:
        $ref: '#/definitions/ImageDetails'
        description: The image details.
      environmentCrn:
        type: string
        description: The CRN of the environment.
      credentialCrn:
        type: string
        description: The CRN of the credential.
      datalakeCrn:
        type: string
        description: The CRN of the attached datalake.
      clusterTemplateCrn:
        type: string
        description: The CRN of the cluster template used for the cluster creation.
  ImageDetails:
    type: object
    description: The details of the image used for cluster instances.
    properties:
      name:
        type: string
        description: The name of the image used for cluster instances.
      id:
        type: string
        description: The ID of the image used for cluster instances. This is internally generated by the cloud provider to uniquely identify the image.
      catalogUrl:
        type: string
        description: The image catalog URL.
      catalogName:
        type: string
        description: The image catalog name.
  GetSuggestedTagsRequest:
    type: object
    description: Get the tags suggested by the Data Compliance Profiler.
    required:
      - datalakeCrn
    properties:
      datalakeCrn:
        type: string
        description: The CRN of the Datalake.
      tableFQN:
        type: string
        description: The fully qualified name of the table.
      columnFQN:
        type: string
        description: The fully qualified name of the column.
      profiledSince:
        type: string
        format: date-time
        description: Tags suggested by the profiler since this date.
  GetSuggestedTagsResponse:
    type: object
    description: Tags suggested by the Data Compliance Profiler.
    properties:
      suggestedTags:
        type: array
        description: List of suggested tags.
        items:
          type: object
          description: Details of the suggested tags.
          properties:
            qualifiedName:
              type: string
              description: The fully qualified name of the asset.
            tags:
              type: array
              description: List of suggested tags.
              items:
                type: string
                description: The name of the suggested tag.
  ReviewSuggestedTagsRequest:
    type: object
    description: Request to review suggested tags.
    required:
      - datalakeCrn
      - assets
      - action
    properties:
      datalakeCrn:
        type: string
        description: The CRN of the Datalake.
      assets:
        type: array
        description: List of assets for which tags are being reviewed.
        items:
          $ref: '#/definitions/AssetsToReviewRequest'
      action:
        type: string
        description: Action to be taken on the suggested tags. (ACCEPT, REJECT)
        enum:
          - ACCEPT
          - REJECT
  AssetsToReviewRequest:
    type: object
    description: Asset details for which tags are being reviewed.
    required:
      - qualifiedName
      - tags
    properties:
      qualifiedName:
        type: string
        description: The fully qualified name of the asset.
      tags:
        type: array
        description: List of tags to be reviewed.
        items:
          type: string
          description: The name of the tag to be reviewed.
  ReviewSuggestedTagsResponse:
    type: object
    description: Review suggested tags response.
    properties:
      reviewedTags:
        type: array
        description: List of reviewed tags.
        items:
          type: object
          description: Details of the reviewed tags.
          properties:
            qualifiedName:
              type: string
              description: The fully qualified name of the asset.
            tagsUpdated:
              type: array
              description: List of tags on which have been reviewed.
              items:
                type: string
                description: The name of the reviewed tag.
            status:
              type: string
              description: The current status of the tags. (ACCEPTED, REJECTED, FAILED)
              enum:
                - ACCEPTED
                - REJECTED
                - FAILED

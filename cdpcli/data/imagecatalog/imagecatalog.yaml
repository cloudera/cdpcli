x-generated: Automatically generated by CDP protoc plugin. Do not edit manually.
swagger: '2.0'
x-endpoint-name: imagecatalog
x-products: CDP
x-form-factors: public
x-cdp-releases: PUBLIC
info:
  version: 0.9.99
  title: Image catalog service
  license:
    name: Apache 2.0
  description: Service for managing custom image catalogs and their associated Cloudera Runtime and FreeIPA images.
  termsOfService: https://www.cloudera.com/legal/commercial-terms-and-conditions.html
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /api/v1/imagecatalog/createCustomCatalog:
    post:
      summary: Create custom image catalog
      description: Creates a new image catalog for Cloudera Runtime and FreeIPA images.
      operationId: createCustomCatalog
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/CreateCustomCatalogRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/CreateCustomCatalogResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: true
  /api/v1/imagecatalog/deleteCustomCatalog:
    post:
      summary: Delete custom image catalog
      description: Deletes an existing image catalog.
      operationId: deleteCustomCatalog
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeleteCustomCatalogRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DeleteCustomCatalogResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: true
  /api/v1/imagecatalog/deleteFreeipaImage:
    post:
      summary: Delete FreeIPA image
      description: Deletes a FreeIPA image from a given catalog.
      operationId: deleteFreeipaImage
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeleteFreeipaImageRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DeleteFreeipaImageResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: true
  /api/v1/imagecatalog/deleteRuntimeImage:
    post:
      summary: Delete Cloudera Runtime image
      description: Deletes a Cloudera Runtime image from a given catalog.
      operationId: deleteRuntimeImage
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DeleteRuntimeImageRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DeleteRuntimeImageResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: true
  /api/v1/imagecatalog/describeCustomCatalog:
    post:
      summary: Describe custom image catalog
      description: Retrieves data about an existing image catalog.
      operationId: describeCustomCatalog
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DescribeCustomCatalogRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DescribeCustomCatalogResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: false
  /api/v1/imagecatalog/describeCustomImage:
    post:
      summary: Describe custom image
      description: Retrieves data about a specific image from a given catalog.
      operationId: describeCustomImage
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DescribeCustomImageRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DescribeCustomImageResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: false
  /api/v1/imagecatalog/describeDefaultImage:
    post:
      summary: Describe default image
      description: Retrieves an image directly by id from the default catalog.
      operationId: describeDefaultImage
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DescribeDefaultImageRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DescribeDefaultImageResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: false
  /api/v1/imagecatalog/findDefaultImage:
    post:
      summary: Find default image
      description: Retrieves an image based on the filters from the default catalog.
      operationId: findDefaultImage
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/FindDefaultImageRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/FindDefaultImageResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: false
  /api/v1/imagecatalog/listCustomCatalogs:
    post:
      summary: List custom image catalogs
      description: Lists all the Cloudera Runtime/FreeIPA image catalogs accessible for the user.
      operationId: listCustomCatalogs
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/ListCustomCatalogsRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/ListCustomCatalogsResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: false
  /api/v1/imagecatalog/setFreeipaImage:
    post:
      summary: Add or update FreeIPA image
      description: Adds or updates a FreeIPA image in the catalog.
      operationId: setFreeipaImage
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/SetFreeipaImageRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/SetFreeipaImageResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: true
  /api/v1/imagecatalog/setRuntimeImage:
    post:
      summary: Add or update Cloudera Runtime image
      description: Adds or updates a Cloudera Runtime image in the catalog.
      operationId: setRuntimeImage
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/SetRuntimeImageRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/SetRuntimeImageResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: true
definitions:
  Error:
    type: object
    description: An object returned on an error.
    properties:
      code:
        type: string
        description: The error code.
      message:
        type: string
        description: The error message.
  CreateCustomCatalogRequest:
    type: object
    description: The request object to create a custom image catalog.
    required:
      - catalogName
    properties:
      catalogName:
        type: string
        description: Image catalog name
      description:
        type: string
        description: Image catalog description
  CreateCustomCatalogResponse:
    type: object
    description: The response object returned in case the custom image catalog has been successfully created.
  DeleteCustomCatalogRequest:
    type: object
    description: The request object to delete a custom image catalog.
    required:
      - catalogName
    properties:
      catalogName:
        type: string
        description: Image catalog name
  DeleteCustomCatalogResponse:
    type: object
    description: The response object returned in case of successful custom image catalog deletion.
  ListCustomCatalogsRequest:
    type: object
    description: The request object to list the registered custom image catalogs.
  ListCustomCatalogsResponse:
    type: object
    description: The response object for the list of registered image catalogs.
    properties:
      imageCatalogs:
        type: array
        items:
          $ref: '#/definitions/CustomImageCatalog'
        description: The list of registered image catalogs
  CustomImageCatalog:
    type: object
    description: Basic image catalog data.
    properties:
      name:
        type: string
        description: Image catalog name
      description:
        type: string
        description: Image catalog description
  DescribeCustomCatalogRequest:
    type: object
    description: The request object to retrieve data about a custom catalog.
    required:
      - catalogName
    properties:
      catalogName:
        type: string
        description: Image catalog name
  DescribeCustomCatalogResponse:
    type: object
    description: The response object holding the retrieved data of a custom catalog.
    properties:
      catalogName:
        type: string
        description: Image catalog name
      description:
        type: string
        description: Image catalog description
      images:
        type: array
        items:
          $ref: '#/definitions/ImageItemResponse'
        description: Detailed information of the images contained within
  SetRuntimeImageRequest:
    type: object
    description: The request object to add or update a Cloudera Runtime image in a catalog.
    required:
      - catalogName
      - sourceImageId
      - vmImages
    properties:
      catalogName:
        type: string
        description: Image catalog name
      sourceImageId:
        type: string
        description: UUID of the image customized by the current image
      vmImages:
        type: array
        items:
          $ref: '#/definitions/VmImageRequest'
        description: List of images
      imageId:
        type: string
        description: Image UUID. If this is empty, a randomly generated UUID is used
      baseParcelUrl:
        type: string
        description: Base parcel URL
        x-no-paramfile: true
  SetFreeipaImageRequest:
    type: object
    description: The request object to add or update a FreeIPA image in a catalog.
    required:
      - catalogName
      - sourceImageId
      - vmImages
    properties:
      catalogName:
        type: string
        description: Image catalog name
      sourceImageId:
        type: string
        description: UUID of the image customized by the current image
      vmImages:
        type: array
        items:
          $ref: '#/definitions/VmImageRequest'
        description: List of images
      imageId:
        type: string
        description: Image UUID. If this is empty, a randomly generated UUID is used
      baseParcelUrl:
        type: string
        description: Base parcel URL
        x-no-paramfile: true
  VmImageRequest:
    type: object
    description: Model holding information about a custom VM image and the cloud region it belongs to. The format of the image reference is specific to the cloud provider, e.g. URL in case of Azure, AMI ID in case of AWS.
    required:
      - region
      - imageReference
    properties:
      region:
        type: string
        description: Region
      imageReference:
        type: string
        description: Image reference
        x-no-paramfile: true
  SetRuntimeImageResponse:
    type: object
    description: The response object holding data about the added or updated Cloudera Runtime image.
    properties:
      imageId:
        type: string
        description: Image UUID
  SetFreeipaImageResponse:
    type: object
    description: The response object holding data about the added or updated FreeIPA image.
    properties:
      imageId:
        type: string
        description: Image UUID
  DeleteRuntimeImageRequest:
    type: object
    description: The request object to delete Cloudera Runtime image from a catalog.
    required:
      - catalogName
      - imageId
    properties:
      catalogName:
        type: string
        description: Image catalog name
      imageId:
        type: string
        description: Image UUID
  DeleteFreeipaImageRequest:
    type: object
    description: The request object to delete FreeIPA image from a catalog.
    required:
      - catalogName
      - imageId
    properties:
      catalogName:
        type: string
        description: Image catalog name
      imageId:
        type: string
        description: Image UUID
  DeleteRuntimeImageResponse:
    type: object
    description: The response object returned in case the Cloudera Runtime image has been successfully removed from the catalog.
    properties:
      imageId:
        type: string
        description: Image UUID
  DeleteFreeipaImageResponse:
    type: object
    description: The response object returned in case the FreeIPA image has been successfully removed from the catalog.
    properties:
      imageId:
        type: string
        description: Image UUID
  DescribeCustomImageRequest:
    type: object
    description: The request object to retrieve data of an image from the given catalog.
    required:
      - catalogName
      - imageId
    properties:
      catalogName:
        type: string
        description: Image catalog name
      imageId:
        type: string
        description: Image UUID
  DescribeCustomImageResponse:
    type: object
    description: The response object holding the data of the image retrieved from the given custom catalog.
    properties:
      imageId:
        type: string
        description: Image UUID
      imageDate:
        type: integer
        format: int64
        description: Image creation date
      imageType:
        description: Image type - either "FREEIPA" or "RUNTIME"
        $ref: '#/definitions/VmImageType'
      sourceImageId:
        type: string
        description: Customized image UUID
      sourceImageDate:
        type: integer
        format: int64
        description: Customized image creation date
      versions:
        type: object
        description: Package versions
        additionalProperties:
          type: string
      provider:
        description: Cloud provider - either AWS, AZURE or GCP
        $ref: '#/definitions/VmImageProvider'
      baseParcelUrl:
        type: string
        description: Base parcel URL
      vmImages:
        type: array
        items:
          $ref: '#/definitions/VmImageResponse'
        description: List of images
  VmImageProvider:
    type: string
    description: "Object representing a valid cloud provider name.\n `AWS` - The image is an AWS VM image `AZURE` - The image is an Azure VM image `GCP` - The image is a GCP VM image"
    enum:
      - AWS
      - AZURE
      - GCP
  VmImageType:
    type: string
    description: "Object representing a valid VM image type.\n `FREEIPA` - FreeIPA image `RUNTIME` - Cloudera Runtime image"
    enum:
      - FREEIPA
      - RUNTIME
  FindDefaultImageRequest:
    type: object
    description: The request object to filter data that is used for retrieving an image from the default image catalog.
    required:
      - provider
      - imageType
    properties:
      provider:
        description: Cloud provider - either AWS, AZURE or GCP
        $ref: '#/definitions/VmImageProvider'
      imageType:
        description: Image type - either "FREEIPA" or "RUNTIME"
        $ref: '#/definitions/VmImageType'
      runtimeVersion:
        type: string
        description: Cloudera runtime version
  FindDefaultImageResponse:
    type: object
    description: The response object for holding data about an image retrieved from the default image catalog.
    properties:
      imageId:
        type: string
        description: Image UUID
      vmImages:
        type: array
        items:
          $ref: '#/definitions/VmImageResponse'
        description: List of images
  DescribeDefaultImageRequest:
    type: object
    description: The request object to retrieve an image from the default image catalog.
    required:
      - imageId
    properties:
      imageId:
        type: string
        description: Image UUID
  DescribeDefaultImageResponse:
    type: object
    description: The response object for holding data about an image retrieved from the default image catalog.
    properties:
      imageId:
        type: string
        description: Image UUID
      vmImages:
        type: array
        items:
          $ref: '#/definitions/VmImageResponse'
        description: List of images
  VmImageResponse:
    type: object
    description: Model holding information about a custom VM image and the cloud region it belongs to. The format of the image reference is specific to the cloud provider, e.g. URL in case of Azure, AMI ID in case of AWS.
    properties:
      region:
        type: string
        description: Region
      imageReference:
        type: string
        description: Image reference
  ImageItemResponse:
    type: object
    description: Model holding detailed information about a custom VM image.
    properties:
      imageId:
        type: string
        description: Image UUID
      imageDate:
        type: integer
        format: int64
        description: Image creation date
      imageType:
        description: Image type - either "FREEIPA" or "RUNTIME"
        $ref: '#/definitions/VmImageType'
      sourceImageId:
        type: string
        description: Customized image UUID
      sourceImageDate:
        type: integer
        format: int64
        description: Customized image creation date
      versions:
        type: object
        description: Package versions
        additionalProperties:
          type: string
      provider:
        description: Cloud provider - either AWS, AZURE or GCP
        $ref: '#/definitions/VmImageProvider'
x-audit: true

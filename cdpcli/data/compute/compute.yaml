x-generated: Automatically generated by CDP protoc plugin. Do not edit manually.
swagger: '2.0'
x-endpoint-name: compute
x-products: CDP
x-form-factors: public,private
x-cdp-releases: PUBLIC
info:
  version: 0.9.99
  title: Cloudera Compute Service
  license:
    name: Apache 2.0
  description: Defining service of compute public API service
  termsOfService: https://www.cloudera.com/legal/commercial-terms-and-conditions.html
schemes:
  - https
consumes:
  - application/json
produces:
  - application/json
paths:
  /api/v1/compute/describeDeployment:
    post:
      summary: Describes a deployment
      description: Gets a single deployment along with its extended history. This can also include all of the known templates.
      operationId: describeDeployment
      x-entitlement: COMPUTE_API_LIFTIE
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/DescribeDeploymentRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/DescribeDeploymentResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: false
  /api/v1/compute/listClusters:
    post:
      summary: List compute clusters
      description: List all compute clusters in a CDP Environment
      operationId: listClusters
      x-entitlement: COMPUTE_API_LIFTIE
      x-paging-default-max-items: 100
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/ListClustersRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/ListClustersResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: false
  /api/v1/compute/upgradeDeployment:
    post:
      summary: Upgrades a deployment to a different chart.
      description: Upgrades a deployment to a different chart.
      operationId: upgradeDeployment
      x-entitlement: COMPUTE_API_LIFTIE
      parameters:
        - name: input
          in: body
          required: true
          schema:
            $ref: '#/definitions/UpgradeDeploymentRequest'
      responses:
        200:
          description: Expected response to a valid request.
          schema:
            $ref: '#/definitions/UpgradeDeploymentResponse'
        default:
          description: The default response on an error.
          schema:
            $ref: '#/definitions/Error'
      x-mutating: true
definitions:
  Error:
    type: object
    description: An object returned on an error.
    properties:
      code:
        type: string
        description: The error code.
      message:
        type: string
        description: The error message.
  EnvCloudProvider:
    type: string
    description: "object representing CDP Environment cloud provider type\n `AWS` - CDP Environment installed in AWS `AZURE` - CDP Environment installed in Azure `OPENSHIFT` - CDP Environment installed as on-premise instalation using CDP DC services in base cluster"
    enum:
      - AWS
      - AZURE
      - OPENSHIFT
  ComputePlatform:
    type: string
    description: "object representing CDP Compute Cluster Platform provider\n `OPENSHIFT` - OpenShift Container Platform cluster as compute platform (private cloud only). `EKS` - EKS cluster as compute platform `AKS` - AKS cluster as compute platform `RKE` - Rancher RKE as compute platform (private cloud only)."
    enum:
      - OPENSHIFT
      - EKS
      - AKS
      - RKE
  ComputeClusterType:
    type: string
    description: "Object representing compute cluster types.\n `Dedicated` - value representing dedicated compute cluster `Shared` - value representing shared compute cluster"
    enum:
      - Dedicated
      - Shared
  ComputeClusterOwner:
    type: object
    description: Compute cluster owner structure.
    properties:
      email:
        type: string
        description: Owner's email.
      firstName:
        type: string
        description: Owner's firstname.
      lastName:
        type: string
        description: Owner's lastname.
      userId:
        type: string
        description: Owner's user ID.
      accountId:
        type: string
        description: Owner's account ID.
      crn:
        type: string
        description: Owner's actor CRN.
    x-form-factors: public
  CommonImageCatalogResp:
    type: object
    description: Image catalog response structure.
    properties:
      crn:
        type: string
        description: The catalog CRN (either CRN or name is required).
      name:
        type: string
        description: The catalog name (either CRN or name is required).
    x-form-factors: public
  CommonStorageSpecResp:
    type: object
    description: Storage spec response structure.
    properties:
      csiEnabled:
        type: boolean
        description: Flag to enable CSI (Container Storage Interface). It further sets specific inline cloud formation policies required for CSI.
    x-form-factors: public
  ListClustersRequest:
    type: object
    description: Request object to list clusters.
    properties:
      envNameOrCrn:
        type: string
        description: Environment name or crn.
      workloads:
        type: string
        description: Workloads for workload filtering.
        x-form-factors: public
      status:
        type: string
        description: Cluster Status for status filtering.
        x-form-factors: public
      pageSize:
        type: integer
        format: int32
        minimum: 1
        maximum: 500
        x-paging-page-size: true
        description: The size of each page. Default is 100.
        default: 100
        x-form-factors: public
      startingToken:
        type: string
        x-paging-input-token: true
        description: A token to specify where to start paginating. This is the nextToken from a previously truncated response. 1 or empty for first page.
        x-form-factors: public
      includeDeleted:
        type: boolean
        description: Include deleted clusters in the response. Optional.
        default: false
        x-form-factors: public
  ListClusterItem:
    type: object
    description: List clusters item structure.
    properties:
      envName:
        type: string
        description: CDP environment name.
      envCloudProvider:
        description: CDP environment cloud provider.
        $ref: '#/definitions/EnvCloudProvider'
      clusterName:
        type: string
        description: Compute cluster name.
      clusterCrn:
        type: string
        description: Compute cluster CRN.
      status:
        type: string
        description: Compute cluster status.
      computePlatform:
        description: Compute cluster platform provider.
        $ref: '#/definitions/ComputePlatform'
      computePlatformVersion:
        type: string
        description: Compute cluster platform version.
        x-form-factors: private
      kubernetesVersion:
        type: string
        description: Kubernetes version.
      clusterSize:
        type: integer
        format: int32
        description: Number of nodes in the cluster.
        x-form-factors: private
      clusterId:
        type: string
        description: Compute cluster ID.
      envCrn:
        type: string
        description: CDP environment CRN.
      clusterType:
        description: Compute cluster type.
        $ref: '#/definitions/ComputeClusterType'
        x-form-factors: public
      creationTime:
        type: string
        description: Compute cluster creation time in ISO format.
        x-form-factors: public
      deletionTime:
        type: string
        description: Compute cluster deletion time in ISO format.
        x-form-factors: public
      updateTime:
        type: string
        description: Compute cluster update time in ISO format.
        x-form-factors: public
      clusterStateVersion:
        type: integer
        format: int32
        description: Cluster state version.
        x-form-factors: public
      clusterOwner:
        description: Cluster owner.
        $ref: '#/definitions/ComputeClusterOwner'
        x-form-factors: public
      region:
        type: string
        description: Region.
        x-form-factors: public
      message:
        type: string
        description: Message with additional details about the cluster status.
        x-form-factors: public
      account:
        type: string
        description: / CDP account ID.
        x-form-factors: public
      availableUpgrades:
        type: array
        items:
          type: string
        description: List of available kubernetes upgrades.
        x-form-factors: public
      imageCatalog:
        description: The image catalog details.
        $ref: '#/definitions/CommonImageCatalogResp'
        x-form-factors: public
      storage:
        description: The storage specifications.
        $ref: '#/definitions/CommonStorageSpecResp'
        x-form-factors: public
      labels:
        type: object
        description: Map of labels associated with this cluster.
        additionalProperties:
          type: string
  ListClustersResponse:
    type: object
    description: List clusters response.
    properties:
      clusters:
        type: array
        x-paging-result: true
        items:
          $ref: '#/definitions/ListClusterItem'
        description: Array of CDP compute clusters.
      nextToken:
        type: string
        x-paging-output-token: true
        description: The token to use when requesting the next set of results. If not present, there are no additional results.
        x-form-factors: public
      totalClusters:
        type: integer
        format: int32
        description: Total number of clusters.
        x-form-factors: public
      totalPages:
        type: integer
        format: int32
        description: Total number of pages.
        x-form-factors: public
  DescribeDeploymentRequest:
    type: object
    description: Request structure for describing a deployment.
    required:
      - clusterCrn
      - namespace
      - name
    properties:
      clusterCrn:
        type: string
        description: Compute cluster CRN.
      namespace:
        type: string
        description: The namespace of the deployment.
      name:
        type: string
        description: The name of the deployment.
  Chart:
    type: object
    description: Chart structure.
    properties:
      applicationVersion:
        type: string
        description: The version (usually of the images) of the components being deployed.
      deploymentVersion:
        type: string
        description: The version of this chart (which is not the version of the components being deployed).
      description:
        type: string
        description: The chart description.
      name:
        type: string
        description: The chart name.
      values:
        type: string
        description: Escaped JSON for values.yaml of that chart.
  AvailableDeploymentUpgrade:
    type: object
    description: Available deployment upgrade structure.
    properties:
      applicationVersion:
        type: string
        description: The version of the components which would be installed from this deployment.
      deploymentVersion:
        type: string
        description: The version of the deployment that is available to upgrade to.
  Deployment:
    type: object
    description: Deployment structure.
    properties:
      name:
        type: string
        description: The name of the deployment.
      namespace:
        type: string
        description: The namespace of the deployment.
      revision:
        type: integer
        format: int32
        description: Helm revision.
      liftieManaged:
        type: boolean
        description: True if Liftie is managing this deployment.
      chart:
        description: Chart that the deployment was created from.
        $ref: '#/definitions/Chart'
      status:
        type: string
        description: Status of the deployment. Currently supported values are UNKNOWN, DEPLOYED, UNINSTALLED, SUPERSEDED, FAILED, PENDING-INSTALL, PENDING-UPGRADE and PENDING-ROLLBACK. New values may be added in the future.
      upgrades:
        type: array
        items:
          $ref: '#/definitions/AvailableDeploymentUpgrade'
        description: Any upgrades available for this deployment.
      overrides:
        type: string
        description: Escaped JSON overrides for the deployment's properties.
  History:
    type: object
    description: History structure.
    properties:
      revision:
        type: integer
        format: int32
        description: Helm revision.
      status:
        type: string
        description: Status of the deployment. Currently supported values are UNKNOWN, DEPLOYED, UNINSTALLED, SUPERSEDED, FAILED, PENDING-INSTALL, PENDING-UPGRADE and PENDING-ROLLBACK. New values may be added in the future.
      chart:
        description: Chart that the deployment was created from.
        $ref: '#/definitions/Chart'
      overrides:
        type: string
        description: Escaped JSON overrides for the deployment's properties for given revision.
  DescribeDeploymentResponse:
    type: object
    description: Response structure for describing a deployment.
    properties:
      deployment:
        description: Deployment details.
        $ref: '#/definitions/Deployment'
      history:
        type: array
        items:
          $ref: '#/definitions/History'
        description: History of the deployment.
      overrides:
        type: string
        description: Escaped JSON overrides for the deployment's properties. Deprecated.
        x-deprecated: true
  UpgradeDeploymentRequest:
    type: object
    description: Request structure for upgrading a deployment.
    required:
      - clusterCrn
      - namespace
      - name
    properties:
      clusterCrn:
        type: string
        description: Compute cluster CRN.
      namespace:
        type: string
        description: The namespace of the deployment.
      name:
        type: string
        description: The name of the deployment.
      chartVersion:
        type: string
        description: The version of the deployment to upgrade to. Defaults to latest version.
      overrides:
        type: string
        description: Escaped JSON overrides for the deployment's properties.
  UpgradeDeploymentResponse:
    type: object
    description: Response structure for upgrading a deployment.
    properties:
      name:
        type: string
        description: The name of the deployment.
      namespace:
        type: string
        description: The namespace of the deployment.
      revision:
        type: integer
        format: int32
        description: Helm revision.
      message:
        type: string
        description: A message returned about the status of the upgrade operation.
      status:
        type: string
        description: Status of the deployment. Currently supported values are UNKNOWN, DEPLOYED, UNINSTALLED, SUPERSEDED, FAILED, PENDING-INSTALL, PENDING-UPGRADE and PENDING-ROLLBACK. New values may be added in the future.
      chart:
        description: Chart that the deployment was created from.
        $ref: '#/definitions/Chart'
x-audit: true
